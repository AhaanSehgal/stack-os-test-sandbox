import { useEffect, useState } from 'react';
import { eventTypes } from '../utils/constants';

export function useListenerSO() {
  const [eventData, setEventData] = useState();
  useEffect(() => {
    const authResponse = (event: any) => {
      if (event.origin !== window.origin) return;
      let eventData;
      try {
        eventData = JSON.parse(event.data);
      } catch (err) {}
      if (eventData && eventData?.type == eventTypes.passMessage) setEventData(eventData);
    };
    window.addEventListener('message', authResponse);
  }, []);
  return { eventData };
}
