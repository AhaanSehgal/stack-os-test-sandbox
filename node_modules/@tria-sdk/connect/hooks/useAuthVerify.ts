import { useEffect } from 'react';
import { TRIA_WALLET_STORE } from '../utils/constants';

export function useAuthVerify() {
  const verify = () => {
    const parentUrl = document.referrer;
    // const connectedSessions = window.localStorage.getItem('tria.connected.apps');
    // if (connectedSessions) {
    //   const apps = JSON.parse(connectedSessions);
    //   if (apps.includes(parentUrl)) {

    //   }
    // }

    const triaStore = window.localStorage.getItem(TRIA_WALLET_STORE);
    if (triaStore) {
      window.parent.postMessage(
        JSON.stringify({
          type: 'Verify Sign up',
          success: 'true',
          data: JSON.parse(triaStore as string),
        })
      );
    }
  };
  useEffect(() => {
    verify();
  }, []);
}
