import { useEffect } from 'react';
import { eventTypes } from '../utils/constants';

export function useAuthConnector() {
  useEffect(() => {
    const listen = (event: any) => {
      let eventData;
      try {
        eventData = JSON.parse(event.data);
      } catch (err) {
        eventData = event.data;
      }
      if (eventData.type == eventTypes.disconnect) {
        // remove from tria.connected.apps local storage
      }
    };
    window.addEventListener('message', listen);
    return () => {
      window.removeEventListener('message', listen);
    };
  }, []);
}
